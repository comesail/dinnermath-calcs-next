<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Beef Brisket Quantity Calculator ‚Äî Solo</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />
<style>
:root{
  --page:#FAFAF7; --card:#FFFFFF; --text:#121212; --muted:#5B616E;
  --accent:#0D3B66; --line:#E6E6E6; --focus:#2E6FF2;
}
*{box-sizing:border-box}
html,body{margin:0;background:var(--page);color:var(--text);font-family:Inter,system-ui,Segoe UI,Arial,sans-serif}
.wrap{max-width:1100px;margin:40px auto;padding:0 24px}
h1{font-weight:700;font-size:36px;line-height:1.1;margin:0 0 8px}
.lede{color:var(--muted);margin:0 0 24px;font-size:16px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
@media (max-width:900px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:20px}
.card h2{margin:0 0 12px;font-size:18px}
.row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin:12px 0}
label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
input[type="number"], select{
  width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:10px;
  background:#fff;font-size:16px;outline:none;
}
input:focus,select:focus{border-color:var(--focus);box-shadow:0 0 0 3px rgba(46,111,242,.15)}
.pills{display:flex;gap:10px;flex-wrap:wrap;margin:8px 0 0}
.pill{font-size:13px;border:1px solid var(--line);padding:6px 10px;border-radius:999px;background:#fff}
.kpis{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
.big{font-size:88px;font-weight:700;letter-spacing:-1px}
.sub{color:var(--muted)}
.note{color:var(--muted);text-align:center;font-size:14px;margin-top:10px}
.split{display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:18px}
.finder{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
.finder a{display:block;text-decoration:none;color:var(--text);border:1px solid var(--line);border-radius:10px;padding:12px 14px}
.finder a:hover{border-color:var(--accent)}
.footer{margin:28px 0 12px;color:var(--muted);font-size:13px}
.btns{display:flex;gap:10px;margin:6px 0 0}
.btn{border:1px solid var(--line);border-radius:999px;background:#fff;padding:6px 10px;font-size:13px;cursor:pointer}
.btn:hover{border-color:var(--accent)}
.hr{height:1px;background:var(--line);margin:14px 0}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Beef Brisket Quantity Calculator</h1>
    <p class="lede">Enter guests and settings (or tap a quick preset). We‚Äôll estimate how many pounds of <b>raw brisket</b> to buy (planning estimate).</p>

    <div class="grid">
      <div class="card">
        <h2>1. How many people are you serving?</h2>
        <div class="row">
          <div>
            <label for="adults">Adults</label>
            <input id="adults" type="number" min="0" step="1" value="5" />
          </div>
          <div>
            <label for="teens">Teens</label>
            <input id="teens" type="number" min="0" step="1" value="0" />
          </div>
          <div>
            <label for="children">Children</label>
            <input id="children" type="number" min="0" step="1" value="0" />
          </div>
        </div>
        <div class="btns">
          <button class="btn" data-preset="10">10</button>
          <button class="btn" data-preset="25">25</button>
          <button class="btn" data-preset="50">50</button>
          <button class="btn" data-preset="100">100</button>
          <button class="btn" data-reset>Reset</button>
        </div>

        <div class="hr"></div>

        <h2>2. How generous would you like the portions to be?</h2>
        <label for="appetite">Appetite</label>
        <select id="appetite">
          <option value="light">Light ‚Äî Allows for lighter portions.</option>
          <option value="moderate" selected>Moderate ‚Äî Fits most gatherings.</option>
          <option value="generous">Generous ‚Äî Allows for heartier portions.</option>
        </select>

        <div class="hr"></div>

        <h2>3. Will this be the only meat or seafood you‚Äôre serving?</h2>
        <label for="role">Role / Meal-Share</label>
        <select id="role">
          <option value="only" selected>Only item (full serving) ‚Äî usually 3 to 4 oz cooked per person.</option>
          <option value="alongside">Alongside another item ‚Äî about 2 to 3 oz cooked per person.</option>
          <option value="small">Small portion ‚Äî about 1.5 to 2 oz cooked per person.</option>
          <option value="tasting">Tasting or small bite ‚Äî about 1 oz cooked per person.</option>
        </select>

        <div class="hr"></div>

        <h2>4. Cut</h2>
        <label for="cut">Cut</label>
        <select id="cut">
          <option value="flat" selected>Flat cut ‚Äî Leaner, higher yield.</option>
          <option value="point">Point cut ‚Äî Fattier, lower yield.</option>
        </select>

        <div class="hr"></div>

        <h2>5. Are you cooking it or buying cooked?</h2>
        <label for="purchaseForm">Form</label>
        <select id="purchaseForm">
          <option value="raw" selected>Raw (you are cooking it)</option>
          <option value="cooked">Cooked (already prepared)</option>
        </select>
      </div>

      <div class="card kpis">
        <div class="sub">ESTIMATED QUANTITY</div>
        <div class="big"><span id="result">0.0</span> lb</div>
        <div class="pills" id="chips"></div>
        <div class="note">The estimate above includes a small built-in cushion, so additional rounding up is generally unnecessary.</div>

        <div class="split">
          <div>
            <h2>Pricing</h2>
            <label for="price">Unit price ($/lb)</label>
            <input id="price" type="number" step="0.01" value="0" />
            <label for="tax">Sales tax %</label>
            <input id="tax" type="number" step="0.01" value="0" />
            <label for="fees">Fees ($)</label>
            <input id="fees" type="number" step="0.01" value="0" />
          </div>
          <div>
            <h2>Finder</h2>
            <div class="finder">
              <a id="findMe" target="_blank" rel="noopener">üìç Find brisket near me</a>
              <a href="https://www.google.com/maps/search/Seafood+markets" target="_blank" rel="noopener">üìç Seafood markets</a>
              <a href="https://www.google.com/maps/search/Wholesale+clubs" target="_blank" rel="noopener">üìç Wholesale clubs</a>
              <a href="https://www.google.com/maps/search/Grocery+stores" target="_blank" rel="noopener">üìç Grocery stores</a>
            </div>
          </div>
        </div>

      </div>
    </div>

    <div class="footer">
      Use for planning only. DinnerMath provides general portion and cost estimates based on USDA FoodData Central guidelines, catering standards, and typical averages. Results depend on the information you enter. DinnerMath is not responsible for purchasing decisions, food safety, or outcomes based on these estimates. ¬© 2025 DinnerMath. All rights reserved.
    </div>
  </div>

<script>
/* === Embedded data (from your brisket JSON) === */
const DM = { Data: {
  food_name: "Beef Brisket",
  category: "meat",
  primary_unit: "raw_lb",
  rounding_rule: "0.25_lb",
  notes: "v2.1 Hybrid: no leftovers control; event length hidden for Meat; dynamic steps; pricing isolated.",
  ae_ladder: { adult: 1.00, teen: 0.80, child: 0.60 },
  appetite: {
    label: "How generous would you like the portions to be?",
    options: [
      { id:"light",    label:"Light",    whisper:"Allows for lighter portions.",  value:0.90 },
      { id:"moderate", label:"Moderate", whisper:"Allows for standard portions.", value:1.00, default:true },
      { id:"generous", label:"Generous", whisper:"Allows for heartier portions.", value:1.15 }
    ]
  },
  role_meal_share: {
    label:"Will this be the only meat or seafood you are serving?",
    options: [
      { id:"only",      label:"Only item (full serving)",              whisper:"Usually 3 to 4 oz cooked per person.", value:1.00, default:true },
      { id:"alongside", label:"Alongside another item",               whisper:"About 2 to 3 oz cooked per person.",   value:0.60 },
      { id:"small",     label:"Small portion",                        whisper:"About 1.5 to 2 oz cooked per person.", value:0.45 },
      { id:"tasting",   label:"Tasting or small bite",                whisper:"About 1 oz cooked per person.",        value:0.35 }
    ]
  },
  baseline: { adult_cooked_oz: 3.5, ladder: { teen:0.80, child:0.60 } },
  controls: [
    { id:"cut", type:"select", label:"Cut", options:[
      { id:"flat",  label:"Flat cut",  whisper:"Leaner, higher yield.", chips_text:"Cut: flat",  default:true },
      { id:"point", label:"Point cut", whisper:"Fattier, lower yield.", chips_text:"Cut: point" }
    ]}
  ],
  purchase_form: {
    enabled: true, label:"Form",
    options:[
      { id:"raw",    label:"Raw (cooking it)",        chips_text:"Form: cooking it",       use_yield:true,  default:true },
      { id:"cooked", label:"Cooked (already prepared)", chips_text:"Form: already prepared", use_yield:false }
    ]
  },
  yields: {
    raw_to_cooked: {
      flat:  { value: 0.60, needs_review:true },
      point: { value: 0.55, needs_review:true }
    }
  },
  results: {
    label:"Estimated quantity to buy",
    second_line_template:"Guests: {guests} ¬∑ Appetite: {appetite} ¬∑ Role: {role}",
    extra_line_template:"About {cooked_lb} cooked pounds.",
    method_note:"Totals reflect a small built-in planning allowance."
  },
  finder: {
    button_text: "Find beef brisket near me",
    search_query: "beef brisket near me",
    pills: ["Butcher shops","Grocery stores"]
  }
}};

/* === Minimal runner (inline) === */
const $ = sel => document.querySelector(sel);
const N = v => Number.parseFloat(v) || 0;

function getOption(block, id){
  const arr = (block && Array.isArray(block.options)) ? block.options : [];
  return arr.find(o=>o.id===id) || arr.find(o=>o.default) || arr[0] || {value:1};
}
function roundToStep(n, rule){
  const step = Number.parseFloat(String(rule).split("_")[0]) || 0.25;
  return Math.round(n/step)*step;
}

function compute(){
  const D = DM.Data;

  const A = N($('#adults').value);
  const T = N($('#teens').value);
  const C = N($('#children').value);

  const appetiteId = $('#appetite').value;
  const roleId     = $('#role').value;
  const cutId      = $('#cut').value;
  const purchaseId = $('#purchaseForm').value;

  const AE = D.ae_ladder;
  const adultCookedOz = D.baseline.adult_cooked_oz || 3.5;

  const baseCookedOz =
    adultCookedOz * (A*AE.adult + T*AE.teen + C*AE.child);

  const appetite = getOption(D.appetite, appetiteId);
  const role     = getOption(D.role_meal_share, roleId);

  let cookedLb = (baseCookedOz/16) * (appetite.value || 1) * (role.value || 1);

  // primary = raw if user buys raw; otherwise cooked pounds is final
  const purchase = getOption(D.purchase_form, purchaseId);
  let primaryLb = cookedLb;
  if (purchase.use_yield){
    const y = (D.yields?.raw_to_cooked?.[cutId]?.value) ?? 0.60;
    primaryLb = (y > 0) ? cookedLb / y : cookedLb / 0.60;
  }

  const rounded = roundToStep(primaryLb, D.rounding_rule);
  $('#result').textContent = rounded.toFixed(1);

  // chips summary
  const chips = [];
  chips.push(`${A}/${T}/${C}`.replace(/\.0/g,""));
  chips.push(`Appetite: ${capitalize(appetiteId)}`);
  chips.push(`Role: ${roleId[0].toUpperCase()+roleId.slice(1)}`);
  $('#chips').innerHTML = `<span class="pill">Guests: ${A}/${T}/${C}</span>
    <span class="pill">Appetite: ${capitalize(appetiteId)}</span>
    <span class="pill">Role: ${capitalize(roleId)}</span>
    <span class="pill">Cut: ${capitalize(cutId)}</span>
    <span class="pill">${purchaseId==="raw"?"Buying raw":"Buying cooked"}</span>`;

  // finder primary button
  const q = encodeURIComponent(D.finder.search_query || "beef brisket near me");
  $('#findMe').href = `https://www.google.com/maps/search/${q}`;
}
function capitalize(s){ return (s||"").charAt(0).toUpperCase()+s.slice(1); }

// bind inputs
['adults','teens','children','appetite','role','cut','purchaseForm']
  .forEach(id => { const el = document.getElementById(id); el.addEventListener('input', compute); el.addEventListener('change', compute); });

// presets
document.querySelectorAll('[data-preset]').forEach(b=>{
  b.addEventListener('click', ()=>{ $('#adults').value = b.dataset.preset; compute(); });
});
document.querySelector('[data-reset]').addEventListener('click', ()=>{
  $('#adults').value=5; $('#teens').value=0; $('#children').value=0;
  $('#appetite').value='moderate'; $('#role').value='only'; $('#cut').value='flat'; $('#purchaseForm').value='raw';
  compute();
});

// initial compute
compute();
</script>
</body>
</html>
