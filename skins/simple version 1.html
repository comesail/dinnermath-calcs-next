<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Cobbler Quantity Calculator – DinnerMath prototype</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #222;
      background-color: #f7f7f7;
    }
    body {
      margin: 0;
      padding: 0 16px 40px;
    }
    .page {
      max-width: 960px;
      margin: 0 auto;
      background: #fff;
      box-shadow: 0 0 0 1px #e0e0e0;
      padding: 40px 48px 48px;
    }
    h1 {
      font-size: 32px;
      font-weight: 600;
      margin: 0 0 8px;
    }
    .lede {
      font-size: 16px;
      color: #555;
      margin-bottom: 32px;
    }
    .step {
      display: grid;
      grid-template-columns: 40px minmax(0, 1fr);
      column-gap: 24px;
      margin-bottom: 32px;
    }
    .step-number {
      font-size: 40px;
      font-weight: 300;
      color: #e0e0e0;
      line-height: 1;
    }
    .step-body h2 {
      font-size: 20px;
      margin: 0 0 4px;
    }
    .step-body .hint {
      font-size: 14px;
      color: #777;
      margin-bottom: 16px;
    }

    .field-row {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }
    .field {
      flex: 1 1 120px;
    }
    label {
      display: block;
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }
    input[type="number"] {
      width: 100%;
      box-sizing: border-box;
      padding: 8px 10px;
      font-size: 15px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    input[type="number"]:focus {
      outline: none;
      border-color: #0b63ce;
      box-shadow: 0 0 0 1px #0b63ce33;
    }

    .presets {
      font-size: 13px;
      color: #555;
      margin-top: 4px;
    }
    .preset-btn {
      border: none;
      background: none;
      color: #0b63ce;
      cursor: pointer;
      padding: 0 4px;
      font-size: 13px;
    }
    .preset-btn:hover {
      text-decoration: underline;
    }

    .card-group {
      display: grid;
      gap: 12px;
    }
    .option-card {
      border-radius: 8px;
      border: 1px solid #ddd;
      padding: 12px 14px;
      display: grid;
      grid-template-columns: 20px minmax(0, 1fr);
      column-gap: 12px;
      cursor: pointer;
      transition: border-color 0.15s, box-shadow 0.15s, background-color 0.15s;
    }
    .option-card input[type="radio"] {
      margin-top: 4px;
    }
    .option-main {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 2px;
    }
    .option-sub {
      font-size: 13px;
      color: #666;
    }
    .option-card.selected {
      border-color: #0b63ce;
      box-shadow: 0 0 0 1px #0b63ce33;
      background-color: #f5f9ff;
    }

    .results-block {
      border-top: 1px solid #eee;
      padding-top: 24px;
      margin-top: 8px;
    }
    .results-heading {
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #999;
      margin-bottom: 4px;
    }
    .results-main {
      font-size: 40px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .results-unit {
      font-size: 22px;
      margin-left: 4px;
    }
    .results-secondary {
      font-size: 15px;
      color: #444;
      margin-bottom: 4px;
    }
    .results-helper {
      font-size: 14px;
      color: #666;
      margin-bottom: 12px;
    }
    .chips {
      font-size: 13px;
      color: #666;
      margin-bottom: 8px;
    }
    .hybrid-note {
      font-size: 12px;
      color: #888;
    }

    .two-col {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
      gap: 24px;
      margin-top: 24px;
      flex-wrap: wrap;
    }
    @media (max-width: 800px) {
      .page {
        padding: 24px 16px 32px;
      }
      .two-col {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .section-title {
      font-size: 14px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #999;
      margin-bottom: 8px;
    }
    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      margin-bottom: 8px;
    }
    .pricing-grid input[type="number"] {
      text-align: right;
    }
    .pricing-summary {
      font-size: 14px;
      color: #444;
    }

    .finder-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }
    .btn-primary, .btn-ghost {
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 14px;
      border: 1px solid #0b63ce;
      cursor: pointer;
      background: #0b63ce;
      color: #fff;
    }
    .btn-ghost {
      background: #fff;
      color: #0b63ce;
    }
    .btn-primary:hover {
      background: #094f9e;
      border-color: #094f9e;
    }
    .btn-ghost:hover {
      background: #e5f0ff;
    }

    footer {
      margin-top: 32px;
      font-size: 11px;
      color: #888;
      border-top: 1px solid #eee;
      padding-top: 12px;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>Cobbler quantity calculator</h1>
      <p class="lede">
        We start with a standard scoop and customize for guests, appetite, and how big a role this dessert will play.
      </p>
    </header>

    <!-- Step 1: Guests -->
    <section class="step" id="step-guests">
      <div class="step-number">1</div>
      <div class="step-body">
        <h2>How many people are you serving?</h2>
        <p class="hint">Count everyone who will be offered cobbler, even if they might only take a small taste.</p>

        <div class="field-row">
          <div class="field">
            <label for="adults">Adults</label>
            <input type="number" id="adults" min="0" value="5">
          </div>
          <div class="field">
            <label for="teens">Teens</label>
            <input type="number" id="teens" min="0" value="0">
          </div>
          <div class="field">
            <label for="children">Children</label>
            <input type="number" id="children" min="0" value="0">
          </div>
        </div>
        <div class="presets">
          Quick presets:
          <button type="button" class="preset-btn" data-preset="10">10</button>
          <button type="button" class="preset-btn" data-preset="25">25</button>
          <button type="button" class="preset-btn" data-preset="50">50</button>
          <button type="button" class="preset-btn" data-preset="100">100</button>
          <span> · Presets set all as adults. Tweak Teens and Children if needed.</span>
        </div>
      </div>
    </section>

    <!-- Step 2: Appetite -->
    <section class="step" id="step-appetite">
      <div class="step-number">2</div>
      <div class="step-body">
        <h2>How generous would you like the portions to be?</h2>
        <p class="hint">This adjusts the portion size after we account for guests and dessert role.</p>

        <div class="card-group" id="appetite-group">
          <label class="option-card">
            <input type="radio" name="appetite" value="0.9">
            <div>
              <div class="option-main">Light</div>
              <div class="option-sub">Allows for lighter portions &mdash; suited to smaller appetites or lighter eaters.</div>
            </div>
          </label>
          <label class="option-card selected">
            <input type="radio" name="appetite" value="1.0" checked>
            <div>
              <div class="option-main">Moderate</div>
              <div class="option-sub">Allows for standard portions &mdash; fits most gatherings.</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="appetite" value="1.15">
            <div>
              <div class="option-main">Generous</div>
              <div class="option-sub">Allows for heartier portions &mdash; ideal for guests who tend to eat a bit more.</div>
            </div>
          </label>
        </div>
      </div>
    </section>

    <!-- Step 3: Role / Meal-share -->
    <section class="step" id="step-role">
      <div class="step-number">3</div>
      <div class="step-body">
        <h2>Will this be the only dessert you are serving?</h2>
        <p class="hint">We will use this starting portion to customize your results.</p>

        <div class="card-group" id="role-group">
          <label class="option-card selected">
            <input type="radio" name="role" value="1.0" checked>
            <div>
              <div class="option-main">This is the only dessert being served</div>
              <div class="option-sub">Allows for full servings &mdash; about 1/2 cup (4 oz) of cobbler per person.</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="role" value="0.6">
            <div>
              <div class="option-main">There will be two or more desserts offered</div>
              <div class="option-sub">Allows for smaller servings &mdash; about 1/3 cup (3 oz) per person.</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="role" value="0.45">
            <div>
              <div class="option-main">I only want to serve a small portion of cobbler</div>
              <div class="option-sub">Allows for a few spoonfuls &mdash; about 1/4 cup (2 oz) per person.</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="role" value="0.35">
            <div>
              <div class="option-main">This is just a small bite to finish the meal</div>
              <div class="option-sub">Allows for a tasting scoop &mdash; about 2 Tbsp (1 oz) per person.</div>
            </div>
          </label>
        </div>
      </div>
    </section>

    <!-- Results -->
    <section class="step" id="step-results">
      <div class="step-number">R</div>
      <div class="step-body">
        <div class="results-block">
          <div class="results-heading">Estimated amount of cobbler to make</div>
          <div>
            <span class="results-main" id="result-amount">0</span>
            <span class="results-unit" id="result-unit">cups</span>
          </div>
          <div class="results-secondary" id="result-secondary">Enter guests above to see an estimate.</div>
          <div class="results-helper">
            Roughly 1 full hotel pan (about 4 in deep) or 2 9 x 13 pans.
          </div>
          <div class="chips" id="result-chips">Guests: 0/0/0 · Appetite: Moderate · Role: Only dessert</div>
          <div class="hybrid-note">
            The estimate includes a small built-in cushion. Additional rounding is usually not needed.
          </div>
        </div>

        <div class="two-col">
          <!-- Pricing -->
          <div>
            <div class="section-title">Pricing (optional)</div>
            <p class="hint">Use this to turn the estimate above into a rough cost. This does not change the quantity.</p>
            <div class="pricing-grid">
              <div>
                <label for="price-per-unit">Unit price</label>
                <input type="number" id="price-per-unit" min="0" step="0.01" value="0">
              </div>
              <div>
                <label for="tax-rate">Tax %</label>
                <input type="number" id="tax-rate" min="0" step="0.1" value="0">
              </div>
              <div>
                <label for="fees">Fees</label>
                <input type="number" id="fees" min="0" step="0.01" value="0">
              </div>
            </div>
            <div class="pricing-summary" id="pricing-summary">
              Total cost: $0.00 · About $0.00 per guest  
              <div style="font-size: 12px; color:#888; margin-top:4px;">
                Pricing assumes the unit price is per cup of cobbler.
              </div>
            </div>
          </div>

          <!-- Finder -->
          <div>
            <div class="section-title">Finder</div>
            <p class="hint">Prefer to buy instead of bake? Use these to search for cobbler nearby.</p>
            <div class="finder-buttons">
              <button type="button" class="btn-primary">Find cobbler near me</button>
              <button type="button" class="btn-ghost">Bakeries</button>
              <button type="button" class="btn-ghost">Grocery stores</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      Use for planning only. DinnerMath provides general portion and cost estimates based on typical catering standards and averages. 
      Results depend on the information you enter. DinnerMath is not responsible for purchasing decisions, food safety, or outcomes based on these estimates.
    </footer>
  </div>

  <script>
    // Adult equivalent factors
    const AE_ADULT = 1.0;
    const AE_TEEN = 0.75;
    const AE_CHILD = 0.5;

    // Baseline scoop: 0.5 cup per AE at role 1.00 and appetite 1.00
    const BASE_CUPS_PER_AE = 0.5;

    function clampNumber(value) {
      const n = Number(value);
      if (!isFinite(n) || n < 0) return 0;
      return n;
    }

    function getSelectedValue(name, defaultVal) {
      const els = document.querySelectorAll('input[name="' + name + '"]');
      for (const el of els) {
        if (el.checked) return Number(el.value);
      }
      return defaultVal;
    }

    function getSelectedLabel(name) {
      const els = document.querySelectorAll('input[name="' + name + '"]');
      for (const el of els) {
        if (el.checked) {
          const card = el.closest(".option-card");
          const main = card ? card.querySelector(".option-main") : null;
          return main ? main.textContent.trim() : "";
        }
      }
      return "";
    }

    function recalc() {
      const adults = clampNumber(document.getElementById("adults").value);
      const teens = clampNumber(document.getElementById("teens").value);
      const children = clampNumber(document.getElementById("children").value);

      const AE =
        adults * AE_ADULT +
        teens * AE_TEEN +
        children * AE_CHILD;

      const appetiteMult = getSelectedValue("appetite", 1.0);
      const roleMult = getSelectedValue("role", 1.0);

      let cups = 0;

      if (AE > 0) {
        // Base cups
        const base = AE * BASE_CUPS_PER_AE;
        cups = base * roleMult * appetiteMult;

        // Hybrid cushion: small buffer, then round
        cups *= 1.05; // 5 percent cushion

        // Round to nearest 0.25 cup, always rounding up for small groups (<= 8 AE)
        const step = 0.25;
        if (AE <= 8) {
          cups = Math.ceil(cups / step) * step;
        } else {
          const rounded = Math.round(cups * (1 / step)) / (1 / step);
          cups = Math.max(rounded, cups);
        }
      }

      const amountEl = document.getElementById("result-amount");
      const unitEl = document.getElementById("result-unit");
      const secondaryEl = document.getElementById("result-secondary");
      const chipsEl = document.getElementById("result-chips");

      if (AE <= 0) {
        amountEl.textContent = "0";
        unitEl.textContent = "cups";
        secondaryEl.textContent = "Enter guests above to see an estimate.";
        chipsEl.textContent =
          "Guests: 0/0/0 · Appetite: " +
          getSelectedLabel("appetite") +
          " · Role: " +
          getSelectedLabel("role");
        updatePricing(0, AE);
        return;
      }

      const quarts = cups / 4;
      const cupsDisplay = Math.round(cups * 100) / 100;
      const quartsDisplay = Math.round(quarts * 100) / 100;

      amountEl.textContent = cupsDisplay.toString();
      unitEl.textContent = "cups";

      secondaryEl.textContent =
        "About " + quartsDisplay + " quarts of cobbler in total.";

      chipsEl.textContent =
        "Guests: " +
        adults + "/" + teens + "/" + children +
        " · Appetite: " + getSelectedLabel("appetite") +
        " · Role: " + getSelectedLabel("role");

      updatePricing(cups, AE);
    }

    function updatePricing(cups, AE) {
      const unitPrice = clampNumber(document.getElementById("price-per-unit").value);
      const taxRate = clampNumber(document.getElementById("tax-rate").value);
      const fees = clampNumber(document.getElementById("fees").value);

      let total = cups * unitPrice;
      if (total < 0) total = 0;

      const tax = total * (taxRate / 100);
      total += tax + fees;

      const perGuest = AE > 0 ? total / AE : 0;

      const summaryEl = document.getElementById("pricing-summary");
      summaryEl.textContent =
        "Total cost: $" + total.toFixed(2) +
        " · About $" + perGuest.toFixed(2) + " per guest";
    }

    // event wiring
    document.getElementById("adults").addEventListener("input", recalc);
    document.getElementById("teens").addEventListener("input", recalc);
    document.getElementById("children").addEventListener("input", recalc);

    document.querySelectorAll('input[name="appetite"]').forEach(function (el) {
      el.addEventListener("change", function () {
        document
          .querySelectorAll("#appetite-group .option-card")
          .forEach(function (card) {
            card.classList.remove("selected");
          });
        el.closest(".option-card").classList.add("selected");
        recalc();
      });
    });

    document.querySelectorAll('input[name="role"]').forEach(function (el) {
      el.addEventListener("change", function () {
        document
          .querySelectorAll("#role-group .option-card")
          .forEach(function (card) {
            card.classList.remove("selected");
          });
        el.closest(".option-card").classList.add("selected");
        recalc();
      });
    });

    document.querySelectorAll(".preset-btn").forEach(function (btn) {
      btn.addEventListener("click", function () {
        const value = Number(btn.getAttribute("data-preset")) || 0;
        document.getElementById("adults").value = value;
        document.getElementById("teens").value = 0;
        document.getElementById("children").value = 0;
        recalc();
      });
    });

    document
      .getElementById("price-per-unit")
      .addEventListener("input", function () { recalc(); });
    document
      .getElementById("tax-rate")
      .addEventListener("input", function () { recalc(); });
    document
      .getElementById("fees")
      .addEventListener("input", function () { recalc(); });

    // select-all on click and focus for number fields
    ["adults", "teens", "children"].forEach(function (id) {
      const el = document.getElementById(id);
      ["focus", "click"].forEach(function (evt) {
        el.addEventListener(evt, function () {
          el.select();
        });
      });
    });

    // initial calc
    recalc();
  </script>
</body>
</html>

  // Initial calculation
  recalc();
})();
</script>
</body>
</html>

