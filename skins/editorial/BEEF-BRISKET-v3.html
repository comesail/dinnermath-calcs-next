<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="dm-skin" content="editorial-v1.1">
  <title>Beef Brisket Quantity Calculator</title>

  <!-- Editorial skin assets only, repo-relative -->
  <link rel="stylesheet" href="./editorial-v1.1.css">
  <script defer src="../../engine/engine.v2.js"></script>
  <script defer src="../../runner/runner.v2.js"></script>

  <style>
    /* Page-local helpers. ASCII only. */
    .dm-wrap { max-width: 960px; margin: 0 auto; padding: 24px; }
    .dm-section { margin: 28px 0; }
    .dm-card { border: 1px solid #e5e5e5; border-radius: 16px; padding: 18px; }
    .dm-header h1 { margin: 0 0 8px 0; font-size: 28px; }
    .dm-kicker { color: #555; font-size: 16px; }
    .dm-grid { display: grid; gap: 16px; }
    .cols-3 { grid-template-columns: repeat(3, 1fr); }
    @media (max-width: 720px){ .cols-3 { grid-template-columns: 1fr; } }
    .dm-field label { display: block; font-weight: 600; margin-bottom: 8px; }
    .dm-input, .dm-select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 10px; font-size: 16px; }
    .dm-note { font-size: 14px; color: #666; margin-top: 6px; }
    .dm-actions { display: flex; gap: 12px; flex-wrap: wrap; }
    .dm-btn { display: inline-block; padding: 12px 16px; border: 1px solid #222; border-radius: 999px; text-decoration: none; }
    .dm-btn.primary { background: #111; color: #fff; }
    .dm-results-line { font-size: 18px; font-weight: 700; }
  </style>
</head>

<body class="dm-editorial">
<main class="dm-wrap">

  <!-- 1) Header -->
  <header class="dm-section dm-header" id="dm-header">
    <h1>Beef Brisket Quantity Calculator</h1>
    <p class="dm-kicker">Plan how much brisket to cook or buy for your crowd. Adjust guests, appetite, and pricing as needed.</p>
  </header>

  <!-- 2) Inputs -->
  <section class="dm-section" id="dm-inputs">
    <div class="dm-card dm-grid cols-3">
      <div class="dm-field">
        <label for="adults">Adults</label>
        <input id="adults" class="dm-input dm-num" type="text" inputmode="numeric" pattern="[0-9]*" value="10" data-dm="adults" aria-label="Adults count">
        <div class="dm-note">Numeric only. Select-all on focus and click.</div>
      </div>
      <div class="dm-field">
        <label for="teens">Teens</label>
        <input id="teens" class="dm-input dm-num" type="text" inputmode="numeric" pattern="[0-9]*" value="0" data-dm="teens" aria-label="Teens count">
      </div>
      <div class="dm-field">
        <label for="children">Children</label>
        <input id="children" class="dm-input dm-num" type="text" inputmode="numeric" pattern="[0-9]*" value="0" data-dm="children" aria-label="Children count">
      </div>
    </div>

    <div class="dm-card" style="margin-top:16px;">
      <div class="dm-field">
        <label for="appetite">How generous would you like the portions to be?</label>
        <select id="appetite" class="dm-select" data-dm="appetite" aria-label="Appetite level">
          <option value="0.90">Light 0.90</option>
          <option value="1.00" selected>Moderate 1.00</option>
          <option value="1.15">Generous 1.15</option>
        </select>
        <div class="dm-note" id="appetite-whisper">Allows for standard portions, fits most gatherings.</div>
      </div>
    </div>

    <!-- Hidden defaults to satisfy engine factors without exposing controls -->
    <input type="hidden" id="role" data-dm="role" value="1.00">
    <input type="hidden" id="length" data-dm="length" value="1.00">
    <input type="hidden" id="leftovers" data-dm="leftovers" value="1.00">
    <!-- End hidden defaults -->
  </section>

  <!-- 3) Pricing -->
  <section class="dm-section" id="dm-pricing">
    <div class="dm-card">
      <h2 style="margin:0 0 12px 0;">Pricing</h2>
      <div class="dm-grid cols-3">
        <div class="dm-field">
          <label for="unitPrice">Unit price (dollars per lb)</label>
          <input id="unitPrice" class="dm-input dm-num" type="text" inputmode="decimal" value="0.00" data-dm="unitPrice" aria-label="Unit price per pound">
        </div>
        <div class="dm-field">
          <label for="taxPct">Sales tax percent</label>
          <input id="taxPct" class="dm-input dm-num" type="text" inputmode="decimal" value="0" data-dm="taxPct" aria-label="Sales tax percent">
        </div>
        <div class="dm-field">
          <label for="fees">Other fees (dollars)</label>
          <input id="fees" class="dm-input dm-num" type="text" inputmode="decimal" value="0.00" data-dm="fees" aria-label="Other fees">
        </div>
      </div>
      <div class="dm-note">Optional. Leave blank for price-free planning.</div>
    </div>
  </section>

  <!-- 4) Results -->
  <section class="dm-section" id="dm-results">
    <div class="dm-card">
      <h2 style="margin:0 0 12px 0;">Results</h2>
      <p class="dm-results-line" id="result-line">Enter guests to see the brisket estimate.</p>
      <div id="result-pricing" class="dm-note">Pricing appears when unit price is provided.</div>
    </div>
  </section>

  <!-- 5) Finder -->
  <section class="dm-section" id="dm-finder">
    <div class="dm-card">
      <h2 style="margin:0 0 12px 0;">Find it near you</h2>
      <div class="dm-actions">
        <a href="#" id="finder-primary" class="dm-btn primary">Find brisket near me</a>
        <a href="#" id="finder-link-1" class="dm-btn">Butcher shops</a>
        <a href="#" id="finder-link-2" class="dm-btn">Grocery stores</a>
      </div>
      <div class="dm-note">Update these links to your preferred map queries or partners.</div>
    </div>
  </section>

</main>
<script>
  // ASCII-only helpers. No legacy v1 files. No Tenderloin.

  // Select-all on focus and click for numeric fields, and numeric-only filter.
  (function(){
    var nums = document.querySelectorAll(".dm-num");
    nums.forEach(function(el){
      function sel(){ el.select(); }
      el.addEventListener("focus", sel);
      el.addEventListener("click", sel);
      el.addEventListener("input", function(){
        var v = el.value.replace(/[^0-9.]/g, "");
        var parts = v.split(".");
        if(parts.length > 2){ v = parts[0] + "." + parts.slice(1).join(""); }
        el.value = v;
      });
    });
  })();

  // Appetite whisper text.
  (function(){
    var appetite = document.getElementById("appetite");
    var whisper = document.getElementById("appetite-whisper");
    function setWhisper(val){
      if(val === "0.90"){
        whisper.textContent = "Allows for lighter portions, suited to smaller appetites or lighter eaters.";
      } else if(val === "1.00"){
        whisper.textContent = "Allows for standard portions, fits most gatherings.";
      } else {
        whisper.textContent = "Allows for heartier portions, ideal for guests who tend to eat a bit more.";
      }
    }
    appetite.addEventListener("change", function(){ setWhisper(appetite.value); });
    setWhisper(appetite.value);
  })();

  // Friendly placeholder until engine.v2 and runner.v2 compute real outputs.
  (function(){
    function updatePlaceholder(){
      var a = parseFloat(document.getElementById("adults").value || "0") || 0;
      var t = parseFloat(document.getElementById("teens").value || "0") || 0;
      var c = parseFloat(document.getElementById("children").value || "0") || 0;
      var total = a + t + c;
      var line = total > 0 ? "Calculating for " + total + " guests..." : "Enter guests to see the brisket estimate.";
      document.getElementById("result-line").textContent = line;
    }
    ["adults","teens","children","appetite","unitPrice","taxPct","fees"].forEach(function(id){
      var el = document.getElementById(id);
      if(el){ el.addEventListener("input", updatePlaceholder); el.addEventListener("change", updatePlaceholder); }
    });
    updatePlaceholder();
  })();
</script>
</body>
</html>
