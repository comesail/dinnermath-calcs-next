<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- WIRE THE DATA PACK (relative to /skins/editorial/) -->
  <meta name="dm-data" content="../../meat/beef-brisket.json" />

  <title>Beef Brisket Quantity Calculator ‚Äî Test Wire</title>

  <style>
    :root{
      --page:#FAFAF7; --card:#FFF; --line:#E8E8E8; --text:#121212; --muted:#6A6A6A; --accent:#0D3B66;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--page);color:var(--text);font:16px/1.5 Inter,system-ui,Segoe UI,Arial,sans-serif}
    .wrap{max-width:1100px;padding:28px;margin:0 auto}
    h1{font-weight:700;letter-spacing:.2px;margin:0 0 8px}
    .lede{color:var(--muted);margin:0 0 24px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} }
    .card{background:var(--card);border:1px solid var(--line);border-radius:8px;padding:18px}
    .row{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    label{display:block;font-size:13px;color:var(--muted);margin:0 0 6px}
    input[type="number"], select{
      width:100%;padding:12px 10px;border:1px solid var(--line);border-radius:6px;font-size:16px;
    }
    .section-title{font-weight:700;margin:18px 0 8px}
    .results{display:flex;flex-direction:column;align-items:center;text-align:center}
    .results h2{font:700 14px/1 Inter,system-ui,Segoe UI,Arial,sans-serif;letter-spacing:.16em;color:var(--muted);margin:0 0 8px}
    .big{font:700 64px/1 Inter,system-ui,Segoe UI,Arial,sans-serif;margin:8px 0 10px}
    .summary{color:var(--muted);margin:6px 0 14px}
    .note{color:var(--muted);font-size:14px}
    .finder{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .finder a{display:flex;align-items:center;gap:8px;justify-content:center;padding:12px;border:1px solid var(--line);border-radius:6px;text-decoration:none;color:var(--text)}
    .finder a .pin{font-size:18px;color:var(--accent)}
    .price-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:10px}
    .disclaimer{color:var(--muted);font-size:13px;margin:24px 0 0}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .chip{font-size:12px;color:var(--muted);border:1px solid var(--line);border-radius:999px;padding:6px 10px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Beef Brisket Quantity Calculator</h1>
    <p class="lede">Enter guests and settings (or tap a quick preset). We‚Äôll estimate how many pounds of <strong>raw brisket</strong> to buy (planning estimate).</p>

    <div class="grid">
      <!-- LEFT: Inputs -->
      <div class="card">
        <div class="section-title">1. How many people are you serving?</div>
        <div class="row">
          <div>
            <label for="adults">Adults</label>
            <input id="adults" type="number" min="0" value="5" />
          </div>
          <div>
            <label for="teens">Teens</label>
            <input id="teens" type="number" min="0" value="0" />
          </div>
          <div>
            <label for="children">Children</label>
            <input id="children" type="number" min="0" value="0" />
          </div>
        </div>
        <div class="chips" style="margin-top:10px">
          <span class="chip quick" data-n="10">10</span>
          <span class="chip quick" data-n="25">25</span>
          <span class="chip quick" data-n="50">50</span>
          <span class="chip quick" data-n="100">100</span>
          <span class="chip" id="reset">Reset</span>
        </div>

        <div class="section-title">2. How generous would you like the portions to be?</div>
        <label class="sr-only" for="appetite">Appetite</label>
        <select id="appetite">
          <option value="light">Light ‚Äî Allows for lighter portions.</option>
          <option value="moderate" selected>Moderate ‚Äî Fits most gatherings.</option>
          <option value="generous">Generous ‚Äî Heftier portions.</option>
        </select>

        <div class="section-title">3. Will this be the only meat or seafood you‚Äôre serving?</div>
        <select id="role">
          <option value="only" selected>Only item (full serving) ‚Äî usually 3 to 4 oz cooked per person.</option>
          <option value="alongside">Alongside another item ‚Äî about 2 to 3 oz cooked per person.</option>
          <option value="small">Small portion ‚Äî about 1.5 to 2 oz cooked per person.</option>
          <option value="tasting">Tasting or small bite ‚Äî about 1 oz cooked per person.</option>
        </select>

        <div class="section-title">4. Cut</div>
        <select id="cut">
          <option value="flat" selected>Flat cut ‚Äî Leaner, higher yield.</option>
          <option value="point">Point cut ‚Äî Fattier, lower yield.</option>
        </select>

        <div class="section-title">5. Are you cooking it or buying cooked?</div>
        <select id="purchaseForm">
          <option value="raw" selected>Raw (cooking it)</option>
          <option value="cooked">Cooked (already prepared)</option>
        </select>
      </div>

      <!-- RIGHT: Results + Pricing + Finder -->
      <div class="card">
        <div class="results">
          <h2>ESTIMATED QUANTITY</h2>
          <div class="big" id="result-number">0.0 lb</div>
          <div class="summary" id="result-summary">Guests: 0/0/0 ¬∑ Appetite: Moderate ¬∑ Role: Only</div>
          <div class="note">The estimate above includes a small built-in cushion, so additional rounding up is generally unnecessary.</div>
        </div>

        <div class="section-title" style="margin-top:16px">Pricing</div>
        <div class="price-grid">
          <div>
            <label for="price">Unit price ($/lb)</label>
            <input id="price" type="number" step="0.01" value="0" />
          </div>
          <div>
            <label for="tax">Sales tax %</label>
            <input id="tax" type="number" step="0.01" value="0" />
          </div>
          <div>
            <label for="fees">Fees ($)</label>
            <input id="fees" type="number" step="0.01" value="0" />
          </div>
        </div>

        <div class="section-title" style="margin-top:16px">Finder</div>
        <div class="finder">
          <a id="find-main" href="#" target="_blank"><span class="pin">üìç</span>Find brisket near me</a>
          <a id="find-seafood" href="#" target="_blank"><span class="pin">üìç</span>Seafood markets</a>
          <a id="find-clubs" href="#" target="_blank"><span class="pin">üìç</span>Wholesale clubs</a>
          <a id="find-grocery" href="#" target="_blank"><span class="pin">üìç</span>Grocery stores</a>
        </div>
      </div>
    </div>

    <p class="disclaimer">
      Use for planning only. DinnerMath provides general portion and cost estimates based on USDA FoodData Central guidelines,
      catering standards, and typical averages. Results depend on the information you enter. DinnerMath is not responsible for
      purchasing decisions, food safety, or outcomes based on these estimates. ¬© 2025 DinnerMath. All rights reserved.
    </p>
  </div>

  <!-- WIRE THE RUNNER (relative to /skins/editorial/) -->
  <script src="../../runner/runner.v2.js"></script>

  <script>
    // quick preset + reset wiring
    document.querySelectorAll('.quick').forEach(el=>{
      el.addEventListener('click', ()=>{
        const n = parseInt(el.dataset.n||'0',10)||0;
        const A = document.getElementById('adults');
        if (A){ A.value = n; A.dispatchEvent(new Event('change',{bubbles:true})); }
      });
    });
    document.getElementById('reset')?.addEventListener('click', ()=>{
      const A = document.getElementById('adults'); const T = document.getElementById('teens'); const C = document.getElementById('children');
      if (A){ A.value = 5; A.dispatchEvent(new Event('change',{bubbles:true})); }
      if (T){ T.value = 0; T.dispatchEvent(new Event('change',{bubbles:true})); }
      if (C){ C.value = 0; C.dispatchEvent(new Event('change',{bubbles:true})); }
      document.getElementById('appetite').value = 'moderate';
      document.getElementById('role').value = 'only';
      document.getElementById('cut').value = 'flat';
      document.getElementById('purchaseForm').value = 'raw';
    });

    // minimal live summary/label updates fed by runner (uses IDs runner populates)
    // The runner writes into #result-number and #result-summary itself.
    // Finder hrefs: use your JSON values via DM.Data once loaded.
    (function waitForData(){
      if (window.DM && DM.Data){
        const q = encodeURIComponent(DM.Data?.finder?.search_query || 'beef brisket near me');
        document.getElementById('find-main').href = 'https://www.google.com/maps/search/'+q;
        document.getElementById('find-seafood').href = 'https://www.google.com/maps/search/'+encodeURIComponent('seafood markets');
        document.getElementById('find-clubs').href = 'https://www.google.com/maps/search/'+encodeURIComponent('wholesale clubs');
        document.getElementById('find-grocery').href = 'https://www.google.com/maps/search/'+encodeURIComponent('grocery stores');
      } else {
        setTimeout(waitForData, 100);
      }
    })();
  </script>
</body>
</html>
